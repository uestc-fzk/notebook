# 自我介绍

面试官您好，我叫冯稚科，目前就读于电子科技大学，专业是软件工程。在校期间学习成绩还可以，拿过一些奖学金。

在开发语言上比较熟悉Java和Go，对Java更熟悉一点，对Java的集合、并发比较了解，以及Java中最常用的Spring框架也看过一些源码。

今年2月到7月在大疆车载中台部实习，用Go开发，参与了高精地图标注管理平台和IAM统一认证授权中心的开发和维护。

我个人比较喜欢学习和写笔记，在大二开发了一个简陋的个人博客网站，我会将自己最近学的东西写到网站中。比如我写过一些对RocketMQ源码的分析，面试官感兴趣的话可以稍微看一下。

# 日常实习

## 资料

掘金：https://juejin.cn/post/6844904127047139335?utm_campaign=sembaidu&utm_medium=sem_baidu_jj_pc_dc01&utm_source=bdpcjjwz04779

### 面试题

1、浏览器输入一个url到整个页面显示出来经历了哪些过程？
https://segmentfault.com/a/1190000017184701

2、DNS过程
分为迭代查询和递归查询，一般是迭代查询：浏览器缓存->本机缓存->本地DNS服务器  ------>分为迭代和递归

3、tcp的三次握手 - 数据包丢失处理
https://blog.csdn.net/qq_45788043/article/details/120399740

4、基于TCP或UDP有哪些协议？

![image-20220305121128504](面试.assets/image-20220305121128504.png)

5、HTTPS的建立过程
https://blog.csdn.net/xiaoming100001/article/details/81109617

![image-20220305121207368](面试.assets/image-20220305121207368.png)

6、Cookie和Session的区别？
https://www.cnblogs.com/l199616j/p/11195667.html

## 百度

质量能效研发部

2021-12-22一面

2021-12-24二面

2021-12-27三面

2021.12.30 通知三面挂了

幸好挂了...

## 华邑技术有限公司

2021-12-30

1.HTTP报文格式
2.TCP3次握手，4次挥手
3.浏览器输入一个URL到页面出现的过程
4..DNS过程
5.聊天室设计过吗？图像处理会吗？Netty看过吗？
6.Linux查看内存命令？top、htop、free
7.操作系统的阻塞和Java的阻塞有什么区别？
8.算法题：其中分割单词用到正则表达式；包含计算素数：要求埃氏筛？更近一步线性筛？

 拒绝了

## 字节跳动

### 抖音电商一面

2021.12.24

算法题是力扣的k个一组翻转链表，没做出来...挂了

### 字节大数据一面

1、自我介绍
2、项目遇到的问题？项目并发量？你们这个小项目为什么要用微服务呢？
3、类加载过程
4、多线程了解吗？讲讲Java的锁。用过多线程吗？synchronized的实现原理？
5、讲讲序列化？有哪些序列化方式？
6、讲讲ConcurrentHashMap？如何解决hash冲突？
7、Spring源码了解吗，讲讲IOC？
8、数据结构题：实现MyArrayList，主要写add()和get()方法，扩容？

9、算法题：一个数组，先非降序排列，再非升序排列，找出最大值。
如[1,2,3,5,5,7,4,2]，最大值应为7
要求：时间复杂度：O(lgN)
我的思路：
二分之后得mid，从mid-1，mid，mid+1这3个数进行分别处理；有4种情况，在这3个相同的情况下，两边都要去递归二分查找。面试官进一步要求：不用递归，要求循环，即O(1)空间复杂度

> 心得：项目确实太简单了，在项目没啥好问的时候，Spring源码一定要懂！

### **字节懂车帝一面**

2022.1.14

1、自我介绍、项目介绍、解释项目、你做了哪些功能？

2、为什么用微服务？怎么进行的服务调用？RPC和REST有什么区别？

3、你们项目是单机的吗？NGINX用来干嘛的？解释一下反向代理？

4、Redis怎么用的？如何解决缓存一致性？如果客户端这边发送请求要访问客户任意天数的浏览记录，你怎么做？ZSET了解吗？为什么不用ZSET来做呢？

5、一个MySQL场景设计题

6、SELECT * FROM xxx WHERE id in xxx AND start_time<=xxx AND end_time<=xxx ；索引为(id,start_time,end_time)，这种查询会走索引吗？怎么走？

7、垃圾回收算法有哪些，讲一个你最熟悉的？Java内存分为哪些？堆的话有哪些部分？新生代对象什么时候会去老年代？

8、HTTP和HTTPS区别？HTTP报文结构？GET和POST区别？TCP和UDP区别？

9、进程和线程的区别？什么是死锁？如何避免死锁？

10、做题：

一个数组，给一个n和sum，要求找到数组中和为sum 的n个数

如[2,3,1,10,4,30]，n为2，sum为31，则返回[1,31].


### 字节懂车帝二面

2022.1.16

1、自我介绍

2、做题，合并区间，比较简单

3、你用的哪些微服务组件？你知道哪些微服务组件？

4、服务注册中心是干什么的？

5、负载均衡是什么？知道哪些负载均衡算法？

6、你们登录验证怎么做的？JWT是自己实现的吗？Cookie是什么？Cookie和Session有什么区别？Session存在哪的？如果是分布式部署应用，如何存储Session？

7、设计一个评论模块？如果评论内容中有HTML或者JS代码，存在一些攻击行为，怎么解决？

答：关键字检测，将HTML或者jS中一些关键字检测一下，发现则拒绝评论内容插入。

问：如果说就是一些人在讨论代码呢？

追问：XSS攻击了解吗？那讲一下SQL注入？

8、大致写一下这个评论的的增删改查？

2022.1.17 下午2点HR面，晚上通知oc并且立刻收到了offer

## 腾讯

### TEG一面

2022.1.7

1.面试官部门介绍
2.自我介绍
3.做题
题目1：shell编程；如何检测apoll用户下的/usr/ppp程序是否运行，没有运行给出警告消息，再启动程序。
题目2：有手就行。
4.C++和go会吗？k8s了解过吗？解释一下链表；单链表，如何快速找到中间结点：快慢指针
5.如果此链表是升序，如何快速找到其中某个值--->提示：跳表
6.TCP3次握手；如果第一次握手包丢失，会怎么样？第二次握手包丢失，怎么样？第3次丢失怎么样？DDOS攻击如何解决？除了这一种方式还有其它的吗？
7.线程间通信方式？有哪些锁？synchronized和Lock什么区别？读多写少怎么搞，还有比读写锁更快的吗，你实现一下？读写锁怎么实现的？在读写锁中，如果一直有新线程来读，写线程会被一直阻塞，如何解决？如果读非常多，写很少，并且对于数据正确性没有特别高的要求，如何实现高吞吐量？提示读写分离
8.操作文件的方式？这些方式的区别，就这些API底层有什么不一样？
9.用过redis嘛，Redis有什么用？如果你修改了某个数据，缓存一致性怎么解决？如果说删除缓存操作因网络波动失败了，怎么办？
答：失败重试？
问：网络波动了重试也失败了呢？
10.项目情况，项目难点？你和师兄师姐他们开发有遇到什么团队问题吗？
11.你有啥子问题没得？
问：为什么要考shell编程呢
答：这是作为程序员应该掌握的一种技能。

### TEG电话二面

2022.1.14

没印象了

### TEG 的HR面

2022.1.18
1、自我介绍、项目介绍、难题解决、部门详情以及业务情况
2、未来规划？校招计划？
3、学习情况？如何学习，更喜欢哪种方式学习？

## 快手

### 一面

2022.01.11

1、自我介绍、项目介绍、解释一下SCRM。了解过其它出名的CRM吗？网易互客
2、你如何管理的access_token的生命周期？是每个用户一个token还是全局的？
失效加锁去获取的话，如果这个时候用户并发量很高怎么办？那你后台线程如何去更新呢？

3、如果在更新的时候，可能微信那边出了一点小问题，导致你的token其实是不能用的，怎么办呢？

答：获取到之后，先去测试一下能不能用，不能用就等一会会再去重新获取。

追问：如果这个可能是由于第三方接口那边的缓存导致在某个时间段内不能用，比如5分钟，应该怎么办？

答：这种情况下，可以考虑去降低影响的时间，比如它这个5分钟，就可以考虑去降低到1分钟或者半分钟这样一个可以接受的范围内，后台线程可以每隔半分钟就去检查是否有效，无效就更新。

4、图片怎么保存的，字符串还是文件？为什么这么做？接口不是应该后端来定义吗？图片流处理和base64字符串哪个更好？了解过CDN吗？

5、websocket如何获取到阅读时长的？为什么这么做呢？socket连接的最长时长？长连接资源消耗其实比正常发请求更大，每个长连接就要有一个线程在那处理连接情况，你有其他不用这个方法的方案吗？

答：轮询。

接着问：轮询其实每秒10次请求也还好，可以去参考一些直播网站或者文章网站，看看他们怎么处理的。

6、做题：最长无重复子串

7、==和equals()的区别？

8、序列化？有什么用？深拷贝？你平常有用到序列化吗？

9、你有什么想问的？

问：北京？如果进了的话，大概做什么业务呢？这样的话就是说有比较高的并发量？

### 二面

2022.1.13

1、自我介绍、拿了哪些奖学金？

2、项目详细介绍？有多少人开发？代码量？什么架构？并发量？为什么选择微服务？项目打开给他看看？依赖管理工具？版本管理有哪些方式?挨着挨着介绍项目模块代码？WebSocket协议了解吗？你这个websocket哈，你们有做分布式吗，就在分布式下你这个websocket还能用吗？(我草，好像还真不能)你们的配置是如何怎么做的？

3、你们数据库有考虑多大数据量吗？索引怎么建的？MySQL读写分离怎么保证一致性？除了MySQL有用到其他存储吗？

4、做题：
String str = "1+2*3-4/5+6-7";
一串字符串，计算它的最终结果，无括号，只有这4中运算符。

5、你博客中的Redis集群那篇文章自己写的还是copy的？Redis集群有哪些方式？cluster集群实现原理？

6、除了Redis，有研究过其他技术吗？Spring源码看了哪些呢？你看了Spring源码的感受？

7、你有啥子问题？没得。

2022.1.14 快手通过啦！
2022.1.17快手已发offer

## 华为云计算

### 一面

2022.1.12

1、自我介绍、成绩咋样、项目介绍、项目技术栈、项目工期、你的代码量、如何做的测试、那你postman用的咋样，会写脚本吗？微服务之间有调用吗，怎么调用的？用过OpenFeign吗？SpringCloudGateway用来做什么？

2、上一周机考的题你感觉咋样？详细讲下第二题的思路？

3、你是怎么建立索引的？

4、接口和抽象类的区别？你在项目中怎么用的？

5、多线程了解吗，乐观锁悲观锁？

6、docker了解吗？消息队列了解吗？

7、Redis拿来干什么的？缓存一致性怎么解决的？

8、前端传来一些文件这些怎么处理的？图片是怎么处理的？

9、有哪些响应码？有做登录认证这些吗？怎么做的？

10、数据校验怎么做的？restful风格？幂等性？

11、题，有手就行。你在力扣或者牛客网上刷了多少题？

12、你有什么问题：

问：我入职的话，会去哪？具体是做什么呢？	

## 大疆创新

### 智能驾驶一面

2022.1.13

1、自我介绍、你的学习规划？想转正是嘛

2、你对大疆怎么看？你对智能驾驶怎么看？

3、项目从头到尾介绍一遍，有什么问题，技术栈？

4、为什么用websocket呢？socket连接中出现的问题，你是如何过滤的？

5、在用Redis过程中有什么问题，如何解决的？Redis有哪些数据结构？zset的底层数据结构了解过吗？缓存击穿和缓存雪崩了解吗？如何解决缓存击穿的？Redis持久化了解吗？RDB和AOF分别在什么情况下使用？

6、在项目中对MySQL可能一些慢查询是如何解决的？MySQL的索引为什么用B+树？有哪些事务隔离级别？MySQL默认是哪一种？

7、HashMap如何解决hash冲突？HashTable和ConcurrentHashMap有什么区别？synchronized和Lock有什么区别？AQS有哪些实现的锁？wait()和sleep()有什么区别？冒泡排序和快速排序的时间复杂度？异常和错误有什么相同点？OOM一般是什么原因造成的？

8、TCP和UDP区别？他们实现了哪些应用层协议？HTTPS协议的连接过程？

9、有哪些垃圾回收算法？为什么Survivor区有两个？CMS和G1的区别？

10、你平常学习大概每天花多少时间来学习技术呢？

11、你有啥子问题？

问：面试流程？两轮技术面吗？业务？

 

### 智能驾驶二面

2022.1.18

1、面试官自我介绍、我的自我介绍

2、你对智能驾驶怎么看，有哪些了解？

3、8分钟，详细介绍项目，用最熟悉的画图工具，画图进行介绍？

4、项目遇到过性能瓶颈吗？

5、职业规划？

6、你有什么问题？
具体业务？待遇？

## **阿里云电话一面**

2022.1.18

当时还和女朋友在外面玩，突然一个骚扰电话打过来，接了居然是阿里云直接就要电话面试，我服了。

1、自我介绍、项目介绍、项目难点

2、登录认证用的JWT？解释一下JWT的实现原理？如果有服务器拦截了JWT，用它进行一些恶意操作，如何解决？

答：一些常规操作用JWT，一些安全风险高的操作就要求必须手机号验证。

3、了解过K8s和docker吗？

4、ConcurrentHashMap的数据结构，实现原理？链表和红黑树有什么不同？ConcurrentHashMap内有copyonwrite逻辑存在吗？

5、你刚才提到synchronized和volatile，这两个有什么关联不？synchronized实现原理是什么？

6、 Lock的实现原理是什么？

7、用过那些中间件？Redis的高可用方案有哪些？Redis的cluster集群实现原理？一致性Hash了解吗？

8、Spring的AOP实现原理？如何解决循环依赖？你是看文章还是看源码？

9、最近有学什么技术吗？有开源项目或者写过框架吗？参加过竞赛吗？

10、你有啥子问题？

感想：不愧是阿里云，没写过框架，没有复杂的项目，想进去太难太难了

# 2023秋招

## 字节懂车帝

一面

1. 自我介绍、项目介绍、你在项目中做的事情
2. MySQL事务隔离级别、如何解决的事务问题、mvcc原理、隐藏字段有哪些
3. Redis缓存问题缓存穿透、缓存雪崩、布隆过滤器实现原理
4. 进程、线程、协程区别，Go协程调度模型，GPM中为什么要有全局队列，偷取怎么实现的？
5. IAM怎么做的，RBAC和ABAC区别，你在里面做的哪些，用户同步讲一讲，为什么用kafka？
6. SCRM项目讲一下，rest讲一讲？HTTP协议和WebSocket的区别？
7. 设计一下微信的扫码登录？经过提醒：登录页和微信后台长连接，并以唯一的二维码映射到此长连接，手机扫码告诉后台此唯一二维码允许登录，后台找到该长连接，将token发过去。面试官说勉强算是合格吧。
8. 算法题：循环链表的判断、二叉树的z字形遍历

二面

1. 自我介绍、项目深挖；
2. 算法题1：n个筛子，投掷1次和为k的概率。
3. 敏感词服务设计题：
   大概10w个敏感词，一篇文章最多1w字；
   敏感词允许crud，文章能判断是否有敏感词。
   我：字典树匹配，敏感词放数据库，服务启动加载构建字典树，curd的时候先改字典树，后改数据库
   面试官：后台服务一般是多个的情况怎么搞
   我：把匹配树放Redis，更改的时候先分布式锁，改完在存入redis
   面试官：消耗太大了。提示后台服务运行有一定延迟的。
   我：那接收到修改的服务先改本地字典树，改数据库，再以MQ发送更改的情况给其它服务。
   面试官：有点复杂了。
4. 协程发生panic会发生什么？map是线程安全的吗？
5. kill pid，这个进程会经历什么？
   答：https://blog.csdn.net/longyu_wlz/article/details/108990092
6. 进程通信方式？信号和信号量区别？
   https://www.cnblogs.com/gcczhongduan/p/3999800.html

我是菜鸡。已挂。

## 百度

**一面：2022-07-27**

1. 自我介绍、项目简介
2. 微信的access_token如何保存，为什么保存在本地而不是Redis，这样和保存在Redis有什么不同？
3. 长连接如何统计的时长，开始时间保存在哪的？像微信切到后台这种情况，如何统计呢？
4. 做题：判断链表是否有环？
5. MySQL事务隔离级别，这些隔离级别解决了哪些问题？
6. Spring Bean的注册过程？
7. 看过Spring源码？你觉得Spring设计的好的地方是哪些？不好的地方呢？FactoryBean和bean的区别？
8. 你常用的Linux命令有哪些？哪个命令用来查看日志？如何查看日志中需要的关键信息？
9. 你有什么问题？能提前来实习吗？

**二面：2022-08-02**

1. 自我介绍、项目介绍，项目难度打分、你在项目的表现打分
2. 今年大四怎么不考研？怎么看待考研的？
3. 服务端执行一条查询SQL语句的全过程？优化器优化时如何选择索引？索引选择性如何得到的？数据或索引是如何存储的？为什么用B+树而不用B树或者二叉树呢？咋学MySQL的？看的书不深入诶？如果遇到书上不懂的怎么办？
4. 一条URL的全流程？DNS解析过程？HTTP请求和响应报文格式？为什么要有ip路由层和运输层？路由层不能可靠传输吗？TCP咋实现可靠传输的？路由层如何找到接受主机的？最短路劲？子网划分？怎么找到套接字的？HTTP请求放到服务器这边怎么做的呢？如果是一个文件下载请求呢？多个服务端的时候怎么解析？
5. 单点登录咋做的？客户端有哪些地方可以存token？cookie和Session的本质上的区别？怎么联合使用？登录的时候咋验证的？怎么加密的？RBAC和ABAC区别？
6. Redis的数据结构有哪些？
7. 问点其他的，说一个优点和一个缺点？分别给出一个证明？如何改变这个缺点？如果leader或者导师批评你怎么做？怎么不呆在大疆呢？最近3个月咋学习的，看书的量是多少？

## 美团

**一面：2022-8-16**

1. 自我介绍、项目介绍、项目模块、项目结构、项目难点、为什么用Redis，如何解决的缓存一致性？
2. 用的MySQL哪个版本，默认什么隔离级别，如何实现的？事务有哪些特性，如何实现的？可重复读能解决幻读，为什么还要序列化级别呢，那分布式事务如何实现的？
3. MySQL为什么建议自增id，为什么用B+树而不是B树？
4. Java创建线程方式？线程池咋用的，如何设置参数最好？
5. 同步和互斥的区别？同步的方式有哪些？
6. 用的Java哪个版本，默认什么垃圾回收器，它会full gc吗，有哪些参数？启动的时候传入哪些参数？
7. Spring如何解决循环依赖？事务@Transaction用过哪些参数？
8. 异常的体系？平常怎么用异常的？遇到过OOM吗？
9. 浅拷贝和深拷贝区别？如何实现深拷贝？
10. 一道简单SQL，一道简单shell，一道简单的单链表删除重复节点的题。
11. 在上个团队你觉得最有价值的一件事

## 用友

一面：2022-08-17

1. 八股文30分钟
2. mybatis的$和#区别？一级缓存和二级缓存？
3. 预期薪资、职业规划

# 面试题

## 操作系统

1. 写时复制(COPY ON WRITE)
   [Linux 写时复制机制原理](https://mp.weixin.qq.com/s/e6VESPfZPPWpy2emZEGK_g)
   [linux内核源码do_fork分析](https://mp.weixin.qq.com/s/_ZFbFMc_8EYPoxG-3g1Yxw)
   进程创建调用fork()函数，子进程克隆父进程，子进程所有数据(变量、环境变量、程序计数器等)数值都和父进程一致。采用**写时复制技术**，当父进程或子进程修改某些内容时，内核才把即将修改的部分进行拷贝。
   **fork()的实际开销就是复制父进程的页表以及给子进程创建唯一的PCB。** 
   
2. do_fork()
   **进程创建函数fork()和线程创建函数clone()都调用内核函数do_fork()：**

   - 调用alloc_task_struct( )函数以获得8KB的union task_union内存区，用来存放新进程的PCB和内核栈。
   - 把父进程**PCB的内容拷贝**到刚刚分配的新进程的PCB中。
   - 集中建立子进程的新资源，并让内核知道这个新进程已经呱呱落地。
   - 子进程的状态被设置为**TASK_UNINTERRUPTIBLE**以保证它不会马上投入运行。
   - 调用get_pid()为新进程获取一个有效的**PID**。
   - **把新的PCB插入进程链表，以确保进程之间的亲属关系。**
   - 把子进程PCB的状态域设置成**TASK_RUNNING**，并调用**wake_up_process( )把子进程插入到运行队列链表。**
   - 让父进程和子进程**平分剩余的时间片**。
   - 返回子进程的PID，这个PID最终由用户态下的父进程读取。

3. 进程同步机制有哪些？
   - 硬件同步机制，如原子指令CMPXCHG(CAS操作)
   - 信号量机制，**用户手动wait原语和signal原语**
   - 管程(Monitor)机制，如Java的synchronized即依赖管程
     管程即**资源管理程序**，确保每次仅1个进程进入管程，**由管程自动wait原语和signal原语**。
     利用共享数据结构抽象系统的共享资源(如代码段)，将对此数据结构操作定义为一组过程，进程对共享资源的申请、释放等操作都必须通过这组过程。进程通过执行这组过程来使用共享资源。
4. 信号和信号量区别？


5. 进程通信方式有哪些？
   
    - 信号灯(semaphore)：用于提供不同进程间或某进程不同线程间的同步手段原语。
    
    - 共享内存
    	- 共享数据结构，如阻塞队列中的有界数组缓冲区，低级通信效率低，仅能传输少量数据；
    	- 共享存储区，先向系统申请内存分区，不需要再归还。能传输大量数据，高级通信；
    - 管道pipe，管道是用于连接一个读进程和一个写进程以**实现通信的pipe文件**。管道是特殊文件，一个固定大小的**环形缓冲区**，大小为1页即4KB。
      只能在父子进程或两个子进程间使用，如shell命令对`ls | more`管道命令解释时，执行以下操作：
      - 调用pipe()系统调用，假设返回文件描述符3(管道的读通道)和文件描述符4(管道写通道)
      - 两次调用fork()系统调用得两个子进程，第一个子进程执行ls程序，第二个子进程之心more程序。
      - 两次close()系统调用关闭文件描述符3和4
    - 消息队列(最广泛)，高级通信方式。
    	- 直接通信方式：利用OS原语send和receive直接把消息发给接受进程。
    	- 间接通信方式：共享中间实体，如消息缓冲队列
    - 套接字(网络主流)
    套接字是通信标识类型的数据结构，本机进程间或网络机器进程间都能套接字通信。
    
6. 分页和分段的主要区别？

   - **页是信息的物理单位**，分页是为了**实现内存离散分配**，分页是系统行为，对用户不可见；段是信息的逻辑单位，目的是满足用户需要。
   - 页大小固定且由系统决定，段长度取决于用户编写的程序。
   - 分页的用户程序地址空间的一维的，分段系统中用户程序地址空间是二维的。

7. 虚拟存储器实现原理--局部性原理？
   程序的执行总是存在局部性，在较短时间内，程序执行仅限于某个部分，访问的存储空间局限于某个区域。

   - 时间局限性：**某条指令执行后短时间内很可能再次执行**。如循环操作。
   - 空间局限性：程序访问了某个存储单元后，短时间内可能访问附近存储单元，即**程序短时间内访问地址集中在一个范围**。如程序顺序执行。

8. 虚拟存储器容量限制？

   - CPU指令地址字长
   - 外存对换区容量

9. 请求分页的硬件支持？

   - 请求页表机制：

| 页号 | 物理块号 | 状态位p              | 访问字段A                                    | 修改位M  | 外存地址 |
| ---- | -------- | -------------------- | -------------------------------------------- | -------- | -------- |
|      |          | 1bit，该页是否在内存 | 记录本页在一段时间内访问次数或多长时间未访问 | 是否修改 |          |

   - 缺页中断机构：地址转换时，若页表项p为0，产生缺页中断。
     缺页中断是程序性中断，在**某条指令执行期间就能发出的特殊中断**(通常CPU只能在指令间隔内响应中断)，一条指令如`COPY A TO B`最多产生6次缺页中断，即指令本身跨2页，数据块A和B也分别跨2页。
   - 地址变换机构

![image-20220815163433315](面试.assets/image-20220815163433315.png)

10. 物理块分配策略

    - 固定分配局部置换：每个进程固定数量物理块，缺页时从本进程分配的物理块选一页调出
    - **可变分配全局置换**：常用，每个进程先分配一定数量物理块，运行时动态调整。缺页时从全局的空闲物理块队列分配物理块，若**内存不足则从任一进程选一页调出**。
    - 可变分配局部置换：内存不足时仅允许从本进程页面选一页调出。频繁缺页中断时，动态调整该进程分配物理块数。

11. 页面置换算法：

    - 最佳置换算法(彼岸)

    - FIFO页面置换算法：置换最老页面

    - **LRU**(Least Recently Used)最近最久未使用置换算法：用`页面访问位`记录上次访问时间

    - LFU(Least Frequently Used)最少使用置换算法

    - Clock置换算法：内存中所有页链接为循环链表，循环检查页面，置换页后检查指针指向该页，下次置换从该指针开始循环检查。
      修改过的页置换时必须写回磁盘代价高。所以循环检查时根据访问位A和修改位M有如下步骤：

      1.寻找A=0,M=0的页面作淘汰页，若无则进入下一步
      2.寻找A=0,M=1的页面作淘汰页，且将路过的页面A=1的设置为A=0，若无则进入下一步
      3.再寻找A=0,M=0的页面，若还是没有则找A=0,M=1的页面

12. 抖动：进程大部分时间用于页面置换而使得CPU利用率直线下降即为抖动状态。
    产生原因：

    - 进程分配物理块太少
    - 置换算法选择不当
    - 全局置换使抖动传播

13. **文件的打开与关闭**：

    - 打开：open系统调用，所谓打开即值系统将指名文件的属性**从外存拷贝到内存打开文件表**的一个表目中，并将该条目编号(即索引号)返给用户。
    - 关闭：close系统调用，OS将**该文件从打开文件表中删除**。

14. 僵尸进程：子进程调用了exit()函数结束，但其父进程尚未对其调用wait或waitpid函数进行善后工作，此时子进程的状态为TASK_ZOMBIE，称为僵尸进程。

    孤儿进程：若父进程在子进程终止之前终止，则将子进程的父进程改为init进程，以保证每个进程都有父进程，之后该子进程将有init进程调用wait函数善后。此时称为孤儿进程。

## JVM

[IDEA查看字节码插件](https://blog.csdn.net/qq_26287435/article/details/123533015)：jclasslib、ASM

java命令查看字节码：`javap -v`

1. 常用的虚拟机参数设置

   - `-Xms`：初始(最小)堆空间（默认物理内存1/64）
   - `-Xmx`：最大堆空间(默认物理内存1/4)
   - `-Xmn`：设置新生代大小
   - `-XX:NewRatio`：配置新生代和老年代在堆中比例
   - `-XX:SurvivorRatio`：新生代Eden与Survivor区比例
   - `-XX:MaxMetaspaceSize`：元空间最大值(默认-1)
   - `-XX:MetaspaceSize`：元空间初始大小
   - `-XX:MinMetaspaceFreeRatio`：垃圾收集后控制元空间剩余容量百分比

2. Java虚拟机运行时数据区域：

   - 线程共享：

     - 方法区：存储被虚拟机加载的类型信息、常量、静态变量、即使编译器编译后的代码缓存等。
       Java8的HotSpot在本地内存中实现的元空间代替原本的永久代设计。
       Class文件中有一项信息是常量池表，存放编译器生成的字面量与符号引用，这些内容将在类加载后放入方法区的运行时常量池中。
     - 堆：**唯一目的存放对象实例**

   - 线程私有：

     - 虚拟机栈：Java方法的调用直至完成对应着一个**栈帧**在虚拟机栈从入栈到出栈过程
     - 本地方法栈：为虚拟机用到的本地(Native)方法服务

     - 程序计数器：字节码的行号指示器

3. 类生命周期：
   加载--》验证--》准备--》解析--》初始化--》使用--》卸载

   - 加载：
     - 通过全限定类名获取类的**二进制字节流**。这个二进制流的获取来源很灵活，如Jar、war、zip。**JDK动态代理使用ProxyGenerator.generateProxyClass()生成代理类的二进制流。**
       也可以自定义类加载器控制字节流的获取。
     - 将字节流**转化为方法区的运行时数据结构**
     - 生成一个代表**此类的Class对象**
   - 验证：确保加载的Class字节流符合规范，如验证魔数等。
   - 准备：为类中定义的**静态变量分配内存并设置初始零值**，如int为0.
   - 解析：将常量池内**非虚方法的符号引用替换为直接引用**
   - 初始化：执行类构造器`<clinit>()`方法，此方法由Javac编译器自动生成，**执行静态变量赋值动作和静态代码块**。

   如`public static int value=123`，在准备阶段为0，初始化阶段被赋值为123.
   最先执行`<clinit>()`的肯定是java.lang.Object，因为它是所有类的父类，从主类加载时必然先触发加载Object。

4. 类加载的触发时机：
   - new关键字实例化对象，调用某个类的静态方法或读取或设置静态字段(非final修饰的常量)时。
   - java.lang.reflect包对某类反射调用时
   - 初始化某类，而其父类未初始化时
   - 虚拟机启动时加载主类(main()所在类)
   - 接口子类初始化时，先初始化接口

5. 类加载器：

   - 启动类加载器(引导类加载器)：BootClassLoader，加载`<JAVA_HOME>/lib`目录
   - 平台类加载器：PlatFormClassLoader，加载`<JAVA_HOME>/lib/ext`目录
   - 应用程序类加载器：APPClassLoader，加载用户类路径(ClassPath)上所有类库，默认加载器。

   双亲委派模型：类加载器收到加载请求先交给父类加载器执行，层层上交，若父类无法加载才子类进行加载。
   作用：避免类重复加载；保护核心API运行安全。注意即使自定义类加载器去尝试加载java.lang包会报异常。
   注意：所谓父类加载器，并不是继承关系，而是组合关系，即子加载器有父加载器这个属性字段。

   自定义类加载器目的：

   - 隔离加载类
   - 修改类加载方式
   - 扩展加载源
   - **保护源码**

6. 运行时栈帧结构：
   - 局部变量表：存放方法参数和方法内局部变量，单位为变量槽，索引为0的变量为方法所属对象实例的引用，即this
   - 操作数栈
   - 动态连接
   - 方法返回地址
   - 附加信息：调试、性能收集等信息

7. 方法调用：确定被调用方法的哪个版本。
   方法调用字节码指令有5条：

   - invokestatic：调用静态方法
   - invokespecial：调用构造方法、私有方法、父类方法
   - invokevirtual：调用虚方法
   - invokeinterface：调用接口方法，将在运行时再确定实现该接口的对象
   - invokedynamic：运行时动态解析出调用点限定符引用的方法。

8. 解析：类加载的解析阶段：会替换非虚方法的符号引用为直接引用。编译器可知，运行期不可变。
   invokestatic和invokespecail指令可以在解析阶段确定调用版本，**即静态方法、私有方法、构造器、父类方法以及final方法(它被invokevirtual指令调用)这5类方法可以在类加载时就替换为直接引用。**
   这类方法统称为**非虚方法**。

9. 分派：分派调用过程是Java多态性最基本体现。
   - 静态分派：依赖**静态类型**决定方法执行版本，如**方法重载**。Javac编译器根据参数的静态类型而不是实际类型决定重载版本，它往往只能确定一个相对合适的版本。
   - 动态分派：**运行期确定方法执行版本**。Java多态性重要体现--重写。
     invokevirtual指令运行时解析过程：**多态性的根源在于虚方法调用指令invokevirtual执行逻辑！**
     1.找到操作数栈顶对象的实际类型，根据对象头类型指针
     2.根据这个类型的方法表找到调用方法的入口地址即可。
     方法表：如果子类没有重写父类方法，则方法表中该方法入口地址和父类方法表中相同。若子类重写了父类方法，则子类方法表中该方法地址替换为子类实现版本的方法入口地址。

10. 编译器：

   - 前端编译器：JDK的Javac、Eclipse JDT的增量式编译器ECJ。**编译期优化提升了程序员编程效率**，如语法糖。
   - 即时编译器：Hotspot虚拟机的C1、C2编译器，Graal编译器。**运行期优化则提升程序运行效率**。
   - 提前编译器：JDK的Jaotc。

11. Javac编译器：

    - 解析与填充符号表：构造抽象语法树、产生符号地址和符号信息
    - 注解处理：插入式注解处理器相当于是编译器插件，运行读、写抽象语法树，如Lombok根据注解自动生成getter/setter方法。
    - 分析与字节码生成：**常量折叠(Javac编译器少有的优化)**、解语法糖即将简化代码还原为原来形式。
      常量折叠如：`int a= 1+2;`将被优化为`int a=3;`
      语法糖：**泛型(编译期类型擦除)**、可变形参、自动装箱和拆箱、断言、Lambda表达式等
      字节码生成：类构造器`<clinit>()`方法和无参构造器`<init>()`方法

12. volatile具备两个特征：

   - **可见性**：每次**使用前从内存中刷新到高速缓存**
   - **禁止指令重排序**优化：赋值后多执行一个`lock addl ...`的操作，相当于一个**内存屏障**，后面的指令不能重排序到内存屏障之前。该lock的作用是**将处理器高速缓存写回内存**，该写入动作使得其它处理器对该值的高速缓存无效。
   - volatile变量读操作和普通变量差不多，写操作慢一些，但也比锁快。
